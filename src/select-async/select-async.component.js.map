{"version":3,"sources":["select-async.component.ts"],"names":[],"mappings":"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","file":"select-async.component.js","sourceRoot":"","sourcesContent":["import { Component, DoCheck, ViewChild, OnInit, OnDestroy, AfterViewInit } from '@angular/core';\r\nimport { FormControl } from '@angular/forms';\r\nimport { Field } from 'ng-formly';\r\nimport { Observable } from 'rxjs';\r\nimport { Subscription } from 'rxjs/Rx';\r\nimport { SelectComponent } from 'ng2-select';\r\n\r\n\r\nexport class FormlySelectAsyncComponent extends Field implements OnInit, OnDestroy, AfterViewInit {\r\n   mySelect: SelectComponent;\r\n\r\n  items: any[] = [];\r\n  selectedItem: any;\r\n  placeholder: string;\r\n  sub_items: Subscription;\r\n  disabled: boolean = false;\r\n\r\n  ngOnInit() {\r\n    this.sub_items = (<any>this.to).options.filter((x: any) => x != null).subscribe((x: any) => {\r\n      this.items = x.map((x: any) => {\r\n        return {\r\n          text: x.name,\r\n          id: x.id\r\n        }\r\n      });\r\n    });\r\n    this.isDisabled();\r\n  }\r\n\r\n  selected(e: any): void {\r\n    this.formControl.setValue(e.id);\r\n  }\r\n\r\n  isDisabled() {\r\n    this.disabled = this.to.disabled || !!this.to.isDisabled && this.to.isDisabled(this.formControl.value);\r\n  }\r\n\r\n  ngAfterViewInit() {    \r\n    if (!this.formControl.value && this.to.defaultValue) {\r\n      this.formControl.setValue(this.to.defaultValue);\r\n    }\r\n    if (!this.formControl.value && !this.to.defaultValue) {\r\n      return;\r\n    }\r\n    \r\n    for (var i = 0, len = this.items.length; i < len; i++) {\r\n      var item = this.items[i];\r\n      console.log(item, this.formControl.value);\r\n      if (item.id == this.formControl.value) {\r\n        this.selectedItem = [item];\r\n        console.log(this.selectedItem);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.sub_items && this.sub_items.unsubscribe();\r\n  }\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\r\n  selector: 'formly-select',\r\n  styles: [`\r\n  .input-group {\r\n        margin-bottom: 15px;\r\n  }\r\n\r\n  :host /deep/ .ui-select-choices {\r\n      display: block !important;\r\n  }\r\n\r\n  :host /deep/ .ui-select-toggle .dropdown-toggle {\r\n      float: right;\r\n  }\r\n\r\n  :host /deep/ .ui-select-toggle.caret-hidden .dropdown-toggle {\r\n      display: none;\r\n  }\r\n  `],\r\n  template: `\r\n  <div [formGroup]=\"form\">\r\n    <label for=\"key\" style=\"display: inline-block;\">{{ to.label }}</label>\r\n    <div class=\"header-search\">\r\n        <ng-select #mySelect [allowClear]=\"true\" [disabled]=\"disabled\" [items]=\"items\" [active]=\"selectedItem\" (selected)=\"selected($event)\" [placeholder]=\"placeholder\" [ngClass]=\"{'form-control-danger': valid}\">\r\n        </ng-select>\r\n    </div>\r\n  </div>\r\n  `\r\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'mySelect': [{ type: ViewChild, args: ['mySelect', ] },],\n};\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}