{"version":3,"sources":["chips.component.ts"],"names":[],"mappings":"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","file":"chips.component.js","sourceRoot":"","sourcesContent":["import { Component, DoCheck, ViewChild, OnInit, OnDestroy } from '@angular/core';\r\nimport { Field } from 'ng-formly';\r\nimport { FormControl } from '@angular/forms';\r\nimport { Observable, Subject } from 'rxjs';\r\n\r\n\r\nexport class FormlyChipsComponent extends Field implements OnInit, OnDestroy {\r\n  public _model: any[] = [];\r\n  private suggestions: string[];\r\n  private ngUnsubscribe: Subject<void> = new Subject<void>();\r\n\r\n  public ngOnInit() {\r\n    this.to.source.takeUntil(this.ngUnsubscribe).subscribe((x: any) => {\r\n      this.suggestions = x;\r\n    });\r\n    if (this.formControl.value) {\r\n      if (typeof this.formControl.value == \"string\") {\r\n        if (this.to.joinString) {\r\n          this._model = this.formControl.value.split(this.to.joinString);\r\n        } else {\r\n          this._model = this.formControl.value.split('|');\r\n        }\r\n      } else {\r\n        this._model = [this.formControl.value.toString()];\r\n      }\r\n    }\r\n  }\r\n\r\n  public onAdd(e: any) {\r\n    this._model.push(e.value);\r\n    if (this.to.joinString) {\r\n      this.formControl.setValue(this._model.join(this.to.joinString));\r\n    } else {\r\n      this.formControl.setValue(this._model.join('|'));\r\n    }\r\n  }\r\n\r\n  public onRemove(e: any) {\r\n    let index = this._model.indexOf(e);\r\n    this._model.splice(index, 1);\r\n    if (this.to.joinString) {\r\n      this.formControl.setValue(this._model.join(this.to.joinString));\r\n    } else {\r\n      this.formControl.setValue(this._model.join('|'));\r\n    }\r\n  }\r\n\r\n  public requestAutocompleteItems = (text: string): Observable<any> => {\r\n    if (this.suggestions && this.suggestions.length > 0) {\r\n      return Observable.of(this.suggestions);\r\n    }\r\n    else {\r\n      return Observable.of([]);\r\n    }\r\n    /*if (this.to.source) {\r\n      return this.to.source(text);\r\n    } else {\r\n      return Observable.of([]);\r\n    }*/\r\n  }\r\n\r\n  public match(query: string, opcion: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.ngUnsubscribe.next();\r\n    this.ngUnsubscribe.complete();\r\n  }\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\r\n  selector: 'formly-chips',\r\n  styles: [],\r\n  template: `\r\n  <div class=\"form-group\">\r\n    <div class=\"header-search\">\r\n        <label for=\"key\" style=\"display: inline-block;\">{{ to.label }}</label>\r\n        <tag-input [ngModel]=\"_model\" [secondaryPlaceholder]=\"to['placeholder'] ? to['placeholder'] : 'Add  values'\" [placeholder]=\"'+'\"\r\n            [maxItems]=\"to['maxItems']\" [onlyFromAutocomplete]=\"to['onlyFromAutocomplete'] || false\"\r\n            (onAdd)=\"onAdd($event)\" (onRemove)=\"onRemove($event)\" [onTextChangeDebounce]=\"500\">\r\n            <tag-input-dropdown [autocompleteObservable]=\"requestAutocompleteItems\" [focusFirstElement]=\"true\" [showDropdownIfEmpty]=\"true\">\r\n            </tag-input-dropdown>\r\n        </tag-input>\r\n        <small class=\"text-muted\">{{to.helpMessage || \"Press 'Enter' to add value\"}}</small>\r\n    </div>\r\n  </div>\r\n  `,\r\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}